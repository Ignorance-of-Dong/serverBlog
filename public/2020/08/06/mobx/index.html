<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="Hexo Theme Keep"><meta name="description" content="Hexo Theme Keep"><meta name="author" content="å°é±¼ä»™å€Œ"><title>ğŸ‘‘Mobx.ğŸ‘‘ | å°é±¼ä»™å€Œ</title><link rel="stylesheet" href="/css/style.css"><link rel="shortcut icon" href="/images/favicon-32x32-next.png"><link rel="stylesheet" href="/css/font-awesome.min.css"><script id="hexo-configurations">let KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"example.com",root:"/",language:"zh-CN",path:"search.xml"},KEEP.theme_config={toc:{enable:!0,number:!0,expand_all:!0,init_open:!0},style:{primary_color:"#0066CC",avatar:"/images/headers.png",favicon:"/images/favicon-32x32-next.png",article_img_align:"left",left_side_width:"260px",content_max_width:"920px",hover:{shadow:!0,scale:!0},first_screen:{enable:!0,background_img:"/images/bg.svg",description:"å¤©å®˜èµç¦ ç™¾æ— ç¦å¿Œ"},scroll:{progress_bar:{enable:!0},percent:{enable:!0}}},local_search:{enable:!0,preload:!0},code_copy:{enable:!0,style:"mac"},pjax:{enable:!1},lazyload:{enable:!0},version:"3.4.2"},KEEP.language_ago={second:"%s ç§’å‰",minute:"%s åˆ†é’Ÿå‰",hour:"%s å°æ—¶å‰",day:"%s å¤©å‰",week:"%s å‘¨å‰",month:"%s æœˆå‰",year:"%s å¹´å‰"}</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="progress-bar-container"><span class="scroll-progress-bar"></span></div><main class="page-container"><div class="page-main-content"><div class="page-main-content-top"><header class="header-wrapper"><div class="header-content"><div class="left"><a class="logo-title" href="/">å°é±¼ä»™å€Œ</a></div><div class="right"><div class="pc"><ul class="menu-list"><li class="menu-item"><a href="/">é¦–é¡µ</a></li><li class="menu-item"><a href="/archives">å½’æ¡£</a></li><li class="menu-item"><a href="/tags">æ ‡ç­¾</a></li><li class="menu-item search search-popup-trigger"><i class="fas fa-search"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div><div class="icon-item menu-bar"><div class="menu-bar-middle"></div></div></div></div></div><div class="header-drawer"><ul class="drawer-menu-list"><li class="drawer-menu-item flex-center"><a href="/">é¦–é¡µ</a></li><li class="drawer-menu-item flex-center"><a href="/archives">å½’æ¡£</a></li><li class="drawer-menu-item flex-center"><a href="/tags">æ ‡ç­¾</a></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle"><div class="main-content"><div class="fade-in-down-animation"><div class="article-content-container"><div class="article-title"><span class="title-hover-animation">ğŸ‘‘Mobx.ğŸ‘‘</span></div><div class="article-header"><div class="avatar"><img src="/images/headers.png"></div><div class="info"><div class="author"><span class="name">å°é±¼ä»™å€Œ</span> <span class="author-label">Lv5</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fas fa-edit"></i>&nbsp;2020-08-06 11:56:44 </span><span class="article-tags article-meta-item"><i class="fas fa-tags"></i>&nbsp;<ul><li><a href="/tags/js/">js</a>&nbsp;</li><li>| <a href="/tags/mobx/">mobx</a>&nbsp;</li></ul></span><span class="article-wordcount article-meta-item"><i class="fas fa-file-word"></i>&nbsp;<span>1.9k å­—</span> </span><span class="article-min2read article-meta-item"><i class="fas fa-clock"></i>&nbsp;<span>8 åˆ†é’Ÿ</span> </span><span class="article-pv article-meta-item"><i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h1 id="ğŸ‘‘MobxğŸ‘‘"><a href="#ğŸ‘‘MobxğŸ‘‘" class="headerlink" title="ğŸ‘‘MobxğŸ‘‘"></a>ğŸ‘‘MobxğŸ‘‘</h1><blockquote><p>ç®€å•çš„ï¼Œå¯æ‰©å±•çš„çŠ¶æ€ç®¡ç†å™¨</p></blockquote><h2 id="ğŸ‘€-å¦‚ä½•ä½¿ç”¨ä½¿ç”¨-ğŸ‘€"><a href="#ğŸ‘€-å¦‚ä½•ä½¿ç”¨ä½¿ç”¨-ğŸ‘€" class="headerlink" title="ğŸ‘€ å¦‚ä½•ä½¿ç”¨ä½¿ç”¨ ğŸ‘€"></a>ğŸ‘€ å¦‚ä½•ä½¿ç”¨ä½¿ç”¨ ğŸ‘€</h2><pre><code>npm install mobx

npm install mobx-react
</code></pre><h2 id="ğŸ‘’-æ ¸å¿ƒ-APIğŸ‘’"><a href="#ğŸ‘’-æ ¸å¿ƒ-APIğŸ‘’" class="headerlink" title="ğŸ‘’ æ ¸å¿ƒ APIğŸ‘’"></a>ğŸ‘’ æ ¸å¿ƒ APIğŸ‘’</h2><h3 id="ğŸ˜»observableğŸ˜»"><a href="#ğŸ˜»observableğŸ˜»" class="headerlink" title="ğŸ˜»observableğŸ˜»"></a>ğŸ˜»observableğŸ˜»</h3><blockquote><p>ä½¿ç”¨</p></blockquote><pre><code>observable(value)
@observable classProperty = value
</code></pre><p><strong>observable çš„å€¼å¯ä»¥æ˜¯ js çš„åŸºæœ¬ç±»å‹ï¼Œå¼•ç”¨ç±»å‹ï¼Œæ™®é€šå¯¹è±¡ï¼Œç±»å®ä¾‹ï¼Œæ•°ç»„å’Œæ˜ å°„ï¼ŒåŒ¹é…ç±»å‹åº”ç”¨è½¬æ¢è§„åˆ™ï¼š</strong></p><h4 id="ğŸ¢-observableğŸ¢"><a href="#ğŸ¢-observableğŸ¢" class="headerlink" title="ğŸ¢@observableğŸ¢"></a>ğŸ¢@observableğŸ¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; observer, inject &#125; <span class="keyword">from</span> <span class="string">&quot;mobx-react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Stores <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line">@inject(<span class="string">&quot;Pubcli&quot;</span>)</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IntegerStep</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span>&lt;<span class="title">any</span>, <span class="title">any</span>&gt; </span>&#123;</span><br><span class="line">  Stores = Stores;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.props, <span class="string">&quot;Stores&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> &#123; changValue, total &#125; = <span class="built_in">this</span>.props.Pubcli;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">        &lt;div&gt;&#123;total&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            changValue();</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          change</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> IntegerStep;</span><br></pre></td></tr></table></figure><hr><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, configure, runInAction, action, computed &#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// configure(&#123; enforceActions: &#x27;always&#x27; &#125;) // å¼ºåˆ¶è¿›è¡Œaction</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pubcli</span> </span>&#123;</span><br><span class="line">  @observable price = <span class="number">1</span>;</span><br><span class="line">  changValue = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.price = <span class="built_in">this</span>.price + <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  @computed <span class="keyword">get</span> <span class="title">total</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.price * <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Pubcli();</span><br></pre></td></tr></table></figure><hr><h4 id="ğŸ-è§„åˆ™ï¼šğŸ"><a href="#ğŸ-è§„åˆ™ï¼šğŸ" class="headerlink" title="ğŸ è§„åˆ™ï¼šğŸ"></a>ğŸ è§„åˆ™ï¼šğŸ</h4><ul><li><p>Map: ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Observerable Map</p><p>observable.map(values, options?)</p></li></ul><hr><p><strong>åˆ›å»ºä¸€ä¸ªåŠ¨æ€é”®çš„ observerable æ˜ å°„</strong></p><p><strong>ä¸‹åˆ— observable æ˜ å°„æ‰€æš´éœ²çš„æ–¹æ³•æ˜¯ä¾æ® Es6 Map è§„èŒƒ</strong></p><blockquote><ul><li>has(key) : è¿”å›æ˜ å°„æ˜¯å¦æœ‰æä¾›é”®å¯¹åº”çš„é¡¹</li><li>set(key, value) : æŠŠå®šé”®çš„å€¼è®¾ç½®ä¸º valueï¼Œæä¾›çš„é”®å¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œé‚£ä¹ˆä»–ä¼šè¢«æ·»åŠ åˆ°æ˜ å°„ä¸­</li><li>delete(key) : æŠŠç»™å®šé”®å’Œå®ƒ çš„å€¼ä»æ˜ å°„ä¸­åˆ é™¤</li><li>get(key) : è¿”å›ç»™å®šé”®çš„å€¼ï¼ˆæˆ– undefinedï¼‰</li><li>keys() : è¿”å›æ˜ å°„ä¸­æ‰€æœ‰å­˜åœ¨çš„æ‰€æœ‰é”®çš„è¿­ä»£å™¨ï¼Œæ’å…¥é¡ºåºä¼šè¢«ä¿ç•™</li><li>value() : è¿”å›æ˜ å°„ä¸­æ‰€æœ‰å­˜åœ¨çš„æ‰€æœ‰å€¼çš„è¿­ä»£å™¨ï¼Œæ’å…¥é¡ºåºä¼šè¢«ä¿ç•™</li><li>entries() : è¿”å›ä¸€ä¸ªï¼ˆä¿ç•™æ’å…¥é¡ºåºï¼‰çš„æ•°ç»„è¿­ä»£å™¨ï¼Œæ˜ å°„ä¸­çš„æ¯ä¸ªé”®å€¼éƒ½ä¼šå¯¹åº”æ•°ç»„ä¸­çš„ä¸€é¡¹[key, value]</li><li>clean() : ç§»é™¤æ˜ å°„ä¸­çš„æ‰€æœ‰é¡¹</li><li>size : è¿”å›æ˜ å°„ä¸­é¡¹çš„æ•°é‡</li></ul></blockquote><hr><ul><li>æ•°ç»„ï¼šä¼šè¿”å›ä¸€ä¸ª Observerable Array</li></ul><hr><ul><li>æ²¡æœ‰åŸå‹çš„å¯¹è±¡ï¼š é‚£ä¹ˆå¯¹è±¡ä¼šè¢«å…‹éš†å¹¶ä¸”æ‰€æœ‰å±æ€§éƒ½ä¼šè¢«è½¬æˆå¯è§‚å¯Ÿçš„</li></ul><hr><ul><li>æœ‰åŸå‹çš„å¯¹è±¡ã€javascript åŸå§‹æ•°æ®ç±»å‹æˆ–è€…å‡½æ•°ã€‘ï¼š è¿”å›ä¸€ä¸ª Boxed Observerable</li></ul><h3 id="ğŸŒ³-å¦‚ä½•å¯¹-observable-åšå‡ºå“åº”-ğŸŒ³"><a href="#ğŸŒ³-å¦‚ä½•å¯¹-observable-åšå‡ºå“åº”-ğŸŒ³" class="headerlink" title="ğŸŒ³ å¦‚ä½•å¯¹ observable åšå‡ºå“åº” ğŸŒ³"></a>ğŸŒ³ å¦‚ä½•å¯¹ observable åšå‡ºå“åº” ğŸŒ³</h3><h4 id="ğŸŒ²-computed-è®¡ç®—å€¼-ğŸŒ²"><a href="#ğŸŒ²-computed-è®¡ç®—å€¼-ğŸŒ²" class="headerlink" title="ğŸŒ²@computed è®¡ç®—å€¼ ğŸŒ²"></a>ğŸŒ²@computed è®¡ç®—å€¼ ğŸŒ²</h4><blockquote><p>è®¡ç®—å€¼æ˜¯æ ¹æ®ç°æœ‰çŠ¶æ€æˆ–å…¶ä»–è®¡ç®—å€¼æ‰€è¡ç”Ÿçš„å€¼ï¼Œè®¡ç®—æ˜¯ç»è¿‡é«˜åº¦ä¼˜åŒ–ï¼Œå› æ­¤åœ¨è®¡ç®—æŸäº›å€¼çš„æ—¶å€™å°½å¯èƒ½çš„ä½¿ç”¨å®ƒ</p></blockquote><p><strong>è®¡ç®—å€¼å¦‚ä½•ä½¿ç”¨ observable ç¬¬ä¸€æ¡ä»¥ä¸¾å‡ºäº†ä¾‹å­</strong></p><ul><li>getter // ç”¨æ¥è·å–è®¡ç®—å‡ºçš„ç»“æœå€¼</li></ul><hr><pre><code>get total() &#123;
    return this.price * this.amount
&#125;,
</code></pre><ul><li>setter // ä¸èƒ½ç›´æ¥æ”¹å˜å€¼ï¼Œä½†æ˜¯å¯ä»¥åšé€†å‘è¡ç”Ÿ</li></ul><hr><pre><code>set total(total) &#123;
    this.price = total / this.amount // ä» total ä¸­æ¨å¯¼å‡º price
&#125;
</code></pre><h4 id="ğŸ™autorun-è‡ªå®šä¹‰ååº”-ğŸ™"><a href="#ğŸ™autorun-è‡ªå®šä¹‰ååº”-ğŸ™" class="headerlink" title="ğŸ™autorun // è‡ªå®šä¹‰ååº” ğŸ™"></a>ğŸ™autorun // è‡ªå®šä¹‰ååº” ğŸ™</h4><p><strong>é€‚ç”¨äºæ‰“å°æ—¥å¿—ï¼ŒæŒä¹…åŒ–æˆ–æ›´æ–° UI ä»£ç ï¼Œå½“ä½¿ç”¨ autorun æ—¶ï¼Œæ‰€æä¾›çš„å‡½æ•°æ€»æ—¶ç«‹å³è¢«è§¦å‘ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œcomputed åˆ›å»ºçš„å‡½æ•°åªæœ‰å½“ä»–æœ‰è‡ªå·±çš„è§‚å¯Ÿè€…æ‰ä¼šè®¡ç®—ï¼Œå¦åˆ™è®¤ä¸ºä»–çš„å€¼æ˜¯ä¸ç›¸å…³çš„</strong></p><pre><code>disposer = autorun(() =&gt; &#123;
    console.log(this.price)
&#125;);
</code></pre><h4 id="ğŸ¨when-è‡ªå®šä¹‰ååº”-ğŸ¨"><a href="#ğŸ¨when-è‡ªå®šä¹‰ååº”-ğŸ¨" class="headerlink" title="ğŸ¨when //è‡ªå®šä¹‰ååº” ğŸ¨"></a>ğŸ¨when //è‡ªå®šä¹‰ååº” ğŸ¨</h4><p><strong>when è§‚å¯Ÿå€¼ï¼Œå½“å€¼æ»¡è¶³æ¡ä»¶çš„æ—¶ï¼Œå°±ä¼šæ‰§è¡Œæ‰§è¡Œç¬¬äºŒå‚æ•°ï¼Œwhen éœ€è¦å†™åœ¨ constructor å†…ï¼Œå¦è€…ä¼šè¢«å½“åšåŸç”Ÿçš„ when å»æ‰§è¡Œ</strong></p><pre><code>constructor () &#123;
    when(
        () =&gt; this.total &gt; 20,
        () =&gt; this.init()
    )
&#125;

@observable price = 1

@computed get total() &#123;
    return this.price * 10
&#125;

init() &#123;
    console.log(this.count++, &#39;å¦è€…&#39;)
&#125;
</code></pre><h4 id="ğŸ‘¹reaction-autorun-çš„å˜ç§-ğŸ‘¹"><a href="#ğŸ‘¹reaction-autorun-çš„å˜ç§-ğŸ‘¹" class="headerlink" title="ğŸ‘¹reaction // autorun çš„å˜ç§ ğŸ‘¹"></a>ğŸ‘¹reaction // autorun çš„å˜ç§ ğŸ‘¹</h4><p><strong>æ¥å—ä¸¤ä¸ªå‡½æ•°å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°æ˜¯æ ¹æ®å¯è§‚å¯Ÿå‡½æ•°ï¼Œæ•°æ®å˜åŒ–åï¼Œè¿”å›çš„ä¸€ä¸ªæ–°å€¼ï¼Œè¯¥å€¼ä½œä¸ºç¬¬äºŒä¸ªå‡½æ•°çš„å‚æ•°</strong></p><pre><code>@observable todos = [
    &#123;
        title: &quot;Make coffee&quot;,
        done: true,
    &#125;,
    &#123;
        title: &quot;Find biscuit&quot;,
        done: false
    &#125;
]

reactions = reaction( // å½“è¢«è§‚å¯Ÿçš„å€¼æ”¹å˜æ—¶ï¼Œæ‰§è¡Œ
    () =&gt; this.todos.map(todo =&gt; todo.title),
    titles =&gt; console.log(&quot;reaction oy:&quot;, titles.join(&quot;, &quot;))
);

changValue = () =&gt; &#123;
    this.todos = [
        ...this.todos,
        &#123;
            title: &quot;Find biscuit&quot;,
            done: false
        &#125;
    ]
    this.price = this.price + 1
&#125;
</code></pre><h4 id="âŒ›-observer-mobx-reactâŒ›"><a href="#âŒ›-observer-mobx-reactâŒ›" class="headerlink" title="âŒ›@observer // mobx-reactâŒ›"></a>âŒ›@observer // mobx-reactâŒ›</h4><p><strong>observer å‡½æ•°æˆ–è£…é¥°å™¨å¯ä»¥å°† react ç»„ä»¶è½¬æ¢æˆå“åº”å¼ç»„ä»¶ï¼Œä»–ç”¨ mobx.autorun åŒ…è£…äº†ç»„ä»¶çš„ render å‡½æ•°ï¼Œä»¥ç¡®ä¿ä»»ä½•ç»„ä»¶æ¸²æŸ“çš„æ•°æ®å˜åŒ–æ—¶éƒ½å¯ä»¥å¼ºåˆ¶åˆ·æ–°ç»„ä»¶ï¼Œobserver æ˜¯å•ç‹¬ç”± mobx-react æä¾›çš„</strong></p><pre><code>import &#123;observer, inject&#125; from &quot;mobx-react&quot;;
@inject(&#39;Pubcli&#39;)
@observer
class IntegerStep extends React.Component&lt;any, any&gt; &#123;
    render() &#123;
        console.log(this.props, &#39;Stores&#39;)
        let &#123; changValue, total &#125; = this.props.Pubcli
        return &lt;&gt;
            &lt;div&gt;&#123;total&#125;&lt;/div&gt;

            &lt;button onClick=&#123;() =&gt; &#123;
                changValue()
            &#125;&#125;&gt;change&lt;/button&gt;

        &lt;/&gt;
    &#125;
&#125;
export default IntegerStep
</code></pre><blockquote><p>æ— çŠ¶æ€å‡½æ•°ç»„ä»¶</p></blockquote><pre><code>import &#123;observer, inject&#125; from &quot;mobx-react&quot;;

const IntegerStep = inject(&#39;Pubcli&#39;)(observer((props) =&gt; &#123;
    let &#123; changValue, total &#125; = props.Pubcli
    console.log(props)
    return &lt;&gt;
        &lt;div&gt;&#123;total&#125;&lt;/div&gt;

        &lt;button onClick=&#123;() =&gt; &#123;
            changValue()
        &#125;&#125;&gt;change&lt;/button&gt;

    &lt;/&gt;
&#125;))
export default IntegerStep
</code></pre><blockquote><p>å¦‚ä¸Šæˆ‘ä»¬å‘ç°äº† inject è¿™ä¸ªå‡½æ•°ã€æ˜¯å°†ç»„ä»¶è¿æ¥åˆ°æä¾›çš„ storeã€‘</p></blockquote><ul><li>ä½¿ç”¨ Provider æ³¨å…¥ stores</li></ul><p><strong>mobx-react æä¾›äº† Provider ç»„ä»¶ï¼Œå®ƒä½¿ç”¨äº† react çš„ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰æœºåˆ¶ï¼Œå¯ä»¥ç”¨æ¥å‘ä¸‹ä¼ é€’ storesï¼Œè¦è¿æ¥åˆ°è¿™äº› storesï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ª stores åç§°ç»™ injectï¼Œè¿™ä½¿å¾— stores å¯ä»¥åšä¸ºç»„ä»¶å¾— props ä½¿ç”¨</strong></p><p>ä¸Šé¢æœ‰å®Œæ•´å¾—ä¾‹å­ ğŸ”œâ¤´</p><blockquote><p>componentWillReact(ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°)</p></blockquote><p><strong>æ”¹å˜ react ç»„ä»¶æœ‰å¤šç§çŠ¶æ€ï¼Œè¿™æ ·æˆ‘ä»¬å¾ˆéš¾çŸ¥é“ï¼Œç»„ä»¶æ˜¯é€šè¿‡ä»€ä¹ˆæ”¹å˜æ¥è¿›è¡Œæ•°æ®æ¸²æŸ“ï¼Œä½¿ç”¨ä¸€ä¸ªæ–°å¾—ç”Ÿå‘½å‘¨æœŸå‡½æ•° componentWillReactï¼Œå½“ç»„ä»¶å› ä¸ºä»–è§‚å¯Ÿå¾—æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™æ—¶å€™ componentWillReact ä¼šè¢«è§¦å‘ï¼Œä»è€Œæ‰¾åˆ°æ¸²æŸ“æº</strong></p><pre><code>import &#123;observer, inject&#125; from &quot;mobx-react&quot;;
@inject(&#39;Pubcli&#39;)
@observer
class IntegerStep extends React.Component&lt;any, any&gt; &#123;

    componentWillReact() &#123;
        console.log(&quot;I will re-render, since the todo has changed!&quot;);
    &#125;
    render() &#123;
        console.log(this.props, &#39;Stores&#39;)
        let &#123; changValue, total &#125; = this.props.Pubcli
        return &lt;&gt;
            &lt;div&gt;&#123;total&#125;&lt;/div&gt;

            &lt;button onClick=&#123;() =&gt; &#123;
                changValue()
            &#125;&#125;&gt;change&lt;/button&gt;

        &lt;/&gt;
    &#125;
&#125;
export default IntegerStep
</code></pre><blockquote><ul><li>componentWillReac ä¸æ¥å—ä»»ä½•å‚æ•°</li><li>componentWillReact åˆå§‹åŒ–æ¸²æŸ“å‰ä¸ä¼šè§¦å‘</li></ul></blockquote><h3 id="ğŸ”—-æ”¹å˜-observablesğŸ”—"><a href="#ğŸ”—-æ”¹å˜-observablesğŸ”—" class="headerlink" title="ğŸ”— æ”¹å˜ observablesğŸ”—"></a>ğŸ”— æ”¹å˜ observablesğŸ”—</h3><h4 id="ğŸ“™action-åŠ¨ä½œ-ğŸ“™"><a href="#ğŸ“™action-åŠ¨ä½œ-ğŸ“™" class="headerlink" title="ğŸ“™action (åŠ¨ä½œ)ğŸ“™"></a>ğŸ“™action (åŠ¨ä½œ)ğŸ“™</h4><p><strong>ä»»ä½•åº”ç”¨éƒ½æ˜¯æœ‰åŠ¨ä½œå¾—ï¼ŒåŠ¨ä½œæ˜¯ç”¨æ¥ä¿®æ”¹çŠ¶æ€å¾—ä¸œè¥¿</strong></p><blockquote><p>action</p></blockquote><pre><code>import &#123; observable, action &#125; from &#39;mobx&#39;

class States &#123;

    @observable timer = null;
    @observable secend = 0;

    @action
    add = () =&gt; &#123;
        this.secend++
    &#125;
&#125;

export default new States()
</code></pre><blockquote><p>action.bound</p></blockquote><p><strong>action è£…é¥°å™¨/å‡½æ•°éµå¾ª JavaScript ä¸­æ ‡å‡†å¾—ç»‘å®šè§„åˆ™ï¼Œä½†æ˜¯ action.bound å¯ä»¥ç”¨æ¥è‡ªåŠ¨å¾—å°†åŠ¨ä½œç»‘å®šåˆ°ç›®æ ‡å¯¹è±¡</strong></p><pre><code>import &#123; observable, action &#125; from &#39;mobx&#39;

class States &#123;

    @observable timer = null;
    @observable secend = 0;

    @action.bound
    add = () =&gt; &#123;
        this.secend++
    &#125;
&#125;

export default new States()
</code></pre><blockquote><p><strong>action.bound ä¸è¦å’Œç®­å¤´å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼›ç®­å¤´å‡½æ•°å·²ç»æ˜¯ç»‘å®šè¿‡å¹¶ä¸”ä¸èƒ½é‡å¤ç»‘å®š</strong></p></blockquote><blockquote><p>runInAction</p></blockquote><p><strong>runInAction æ˜¯ä¸ªç®€å•å¾—å·¥å…·å‡½æ•°ï¼Œä»–æ¥å—ä»£ç å—å¹¶ä¸”ï¼ˆå¼‚æ­¥åŠ¨ä½œï¼‰ä¸­æ‰§è¡Œï¼Œè¿™å¯¹å³æ—¶åˆ›å»ºå’Œæ‰§è¡ŒåŠ¨ä½œéå¸¸æœ‰ç”¨</strong></p><blockquote><p>runInAction(f) æ˜¯ action(f) çš„è¯­æ³•ç³–</p></blockquote><pre><code>@observable showErrType = true
@observable money = 230

runInAction(() =&gt; &#123;
    this.showErrType = false
    this.money = 8888
&#125;)
</code></pre><blockquote><p>å½“ç„¶ runInAction é…åˆ async await å¼‚æ­¥è°ƒç”¨ï¼Œä¼šæœ‰æ›´å¥½çš„ä½“éªŒ</p></blockquote><blockquote><p>flows</p></blockquote><p><strong>ç„¶è€Œæ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨ flow çš„å†…ç½®æ¦‚å¿µï¼Œä»–ä»¬ä½¿ç”¨ç”Ÿæˆå™¨ï¼Œä»–ä»¬çš„å·¥ä½œåŸç†å’Œ async await ä¸€æ ·ï¼Œä»–çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦æ‰‹åŠ¨ç”¨@action æ¥åŒ…è£…å¼‚æ­¥ä»£ç ã€‚è¿™æ ·ä»£ç æ›´åŠ ç®€æ´</strong></p><blockquote><p>flow åªèƒ½ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œä¸èƒ½ä½œä¸ºè£…é¥°å™¨ä½¿ç”¨</p></blockquote><pre><code>class Store &#123;
    @observable githubProjects = []
    @observable state = &quot;pending&quot;

    fetchProjects = flow(function * () &#123; // &lt;- æ³¨æ„*å·ï¼Œè¿™æ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼
        this.githubProjects = []
        this.state = &quot;pending&quot;
        try &#123;
            const projects = yield fetchGithubProjectsSomehow() // ç”¨ yield ä»£æ›¿ await
            const filteredProjects = somePreprocessing(projects)
            // å¼‚æ­¥ä»£ç å—ä¼šè¢«è‡ªåŠ¨åŒ…è£…æˆåŠ¨ä½œå¹¶ä¿®æ”¹çŠ¶æ€
            this.state = &quot;done&quot;
            this.githubProjects = filteredProjects
        &#125; catch (error) &#123;
            this.state = &quot;error&quot;
        &#125;
    &#125;)
&#125;
</code></pre><h3 id="ğŸ“¢-å·¥å…·å‡½æ•°-ğŸ“¢"><a href="#ğŸ“¢-å·¥å…·å‡½æ•°-ğŸ“¢" class="headerlink" title="ğŸ“¢ å·¥å…·å‡½æ•° ğŸ“¢"></a>ğŸ“¢ å·¥å…·å‡½æ•° ğŸ“¢</h3><h4 id="ğŸŒ€toJSğŸŒ€"><a href="#ğŸŒ€toJSğŸŒ€" class="headerlink" title="ğŸŒ€toJSğŸŒ€"></a>ğŸŒ€toJSğŸŒ€</h4><p><strong>é€’å½’çš„å°†ä¸€ä¸ª observable å¯¹è±¡è½¬æ¢ä¸º JavaScript åŸå§‹æ•°æ®è§£æ„</strong></p><pre><code>var obj = mobx.observable(&#123;
    x: 1
&#125;);

var clone = mobx.toJS(obj);
</code></pre><h4><a href="#" class="headerlink"></a></h4></div><div class="post-copyright-info"><div class="article-copyright-info-container"><ul><li>æœ¬æ–‡æ ‡é¢˜ï¼šğŸ‘‘Mobx.ğŸ‘‘</li><li>æœ¬æ–‡ä½œè€…ï¼šå°é±¼ä»™å€Œ</li><li>åˆ›å»ºæ—¶é—´ï¼š2020-08-06 11:56:44</li><li>æœ¬æ–‡é“¾æ¥ï¼šhttp://fishfairy.cn/2020/08/06/mobx/</li><li>ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></div><div class="article-nav"><div class="article-prev"><a class="prev" rel="prev" href="/2021/04/20/seReducer+useContext+createContext/"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item">ğŸŒHooksè¿›é˜¶-02ğŸŒ</span> <span class="post-nav-item">ä¸Šä¸€ç¯‡</span></span></a></div><div class="article-next"><a class="next" rel="next" href="/2020/08/06/duboule/"><span class="title flex-center"><span class="post-nav-title-item">ğŸ‘®0.1+0.2 != 0.3??.ğŸ‘®</span> <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div></div></div></div></div><div class="page-main-content-bottom"><footer class="footer"><div class="info-container"><div class="copyright-info info-item">&copy; <span>2018</span>&nbsp;-&nbsp; 2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">å°é±¼ä»™å€Œ</a></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv">è®¿é—®äººæ•°&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp; </span><span id="busuanzi_container_site_pv">æ€»è®¿é—®é‡&nbsp;<span id="busuanzi_value_site_pv"></span></span></div><div class="icp-info info-item"><a target="_blank" rel="nofollow" href="https://beian.miit.gov.cn">æ™‹ICPå¤‡18012867å·-2</a></div></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="tools-list"><li class="tools-item page-aside-toggle"><i class="fas fa-outdent"></i></li></ul></div></div><div class="right-bottom-side-tools"><div class="side-tools-container"><ul class="side-tools-list"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-expand-width flex-center"><i class="fas fa-arrows-alt-h"></i></li><li class="tools-item tool-dark-light-toggle flex-center"><i class="fas fa-moon"></i></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="exposed-tools-list"><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li><li class="tools-item tool-scroll-to-top flex-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><aside class="page-aside"><div class="post-toc-wrap"><div class="post-toc"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%F0%9F%91%91Mobx%F0%9F%91%91"><span class="nav-number">1.</span> <span class="nav-text">ğŸ‘‘MobxğŸ‘‘</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%91%80-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E4%BD%BF%E7%94%A8-%F0%9F%91%80"><span class="nav-number">1.1.</span> <span class="nav-text">ğŸ‘€ å¦‚ä½•ä½¿ç”¨ä½¿ç”¨ ğŸ‘€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%91%92-%E6%A0%B8%E5%BF%83-API%F0%9F%91%92"><span class="nav-number">1.2.</span> <span class="nav-text">ğŸ‘’ æ ¸å¿ƒ APIğŸ‘’</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%98%BBobservable%F0%9F%98%BB"><span class="nav-number">1.2.1.</span> <span class="nav-text">ğŸ˜»observableğŸ˜»</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%90%A2-observable%F0%9F%90%A2"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">ğŸ¢@observableğŸ¢</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%90%8D-%E8%A7%84%E5%88%99%EF%BC%9A%F0%9F%90%8D"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">ğŸ è§„åˆ™ï¼šğŸ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8C%B3-%E5%A6%82%E4%BD%95%E5%AF%B9-observable-%E5%81%9A%E5%87%BA%E5%93%8D%E5%BA%94-%F0%9F%8C%B3"><span class="nav-number">1.2.2.</span> <span class="nav-text">ğŸŒ³ å¦‚ä½•å¯¹ observable åšå‡ºå“åº” ğŸŒ³</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%8C%B2-computed-%E8%AE%A1%E7%AE%97%E5%80%BC-%F0%9F%8C%B2"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">ğŸŒ²@computed è®¡ç®—å€¼ ğŸŒ²</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%8D%99autorun-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%8D%E5%BA%94-%F0%9F%8D%99"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">ğŸ™autorun &#x2F;&#x2F; è‡ªå®šä¹‰ååº” ğŸ™</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%8E%A8when-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%8D%E5%BA%94-%F0%9F%8E%A8"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">ğŸ¨when &#x2F;&#x2F;è‡ªå®šä¹‰ååº” ğŸ¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%91%B9reaction-autorun-%E7%9A%84%E5%8F%98%E7%A7%8D-%F0%9F%91%B9"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">ğŸ‘¹reaction &#x2F;&#x2F; autorun çš„å˜ç§ ğŸ‘¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%8C%9B-observer-mobx-react%E2%8C%9B"><span class="nav-number">1.2.2.5.</span> <span class="nav-text">âŒ›@observer &#x2F;&#x2F; mobx-reactâŒ›</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%94%97-%E6%94%B9%E5%8F%98-observables%F0%9F%94%97"><span class="nav-number">1.2.3.</span> <span class="nav-text">ğŸ”— æ”¹å˜ observablesğŸ”—</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%93%99action-%E5%8A%A8%E4%BD%9C-%F0%9F%93%99"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">ğŸ“™action (åŠ¨ä½œ)ğŸ“™</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%A2-%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0-%F0%9F%93%A2"><span class="nav-number">1.2.4.</span> <span class="nav-text">ğŸ“¢ å·¥å…·å‡½æ•° ğŸ“¢</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%8C%80toJS%F0%9F%8C%80"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">ğŸŒ€toJSğŸŒ€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">1.2.4.2.</span> <span class="nav-text"></span></a></li></ol></li></ol></li></ol></li></ol></div></div></aside><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fas fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fas fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/header-shrink.js"></script><script src="/js/back2top.js"></script><script src="/js/dark-light-toggle.js"></script><script src="/js/local-search.js"></script><script src="/js/code-copy.js"></script><script src="/js/lazyload.js"></script><div class="post-scripts"><script src="/js/left-side-toggle.js"></script><script src="/js/libs/anime.min.js"></script><script src="/js/toc.js"></script></div></body></html>