<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="Hexo Theme Keep"><meta name="description" content="Hexo Theme Keep"><meta name="author" content="小鱼仙倌"><title>跨域 | 小鱼仙倌</title><link rel="stylesheet" href="/css/style.css"><link rel="shortcut icon" href="/images/favicon-32x32-next.png"><link rel="stylesheet" href="/css/font-awesome.min.css"><script id="hexo-configurations">let KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"example.com",root:"/",language:"zh-CN",path:"search.xml"},KEEP.theme_config={toc:{enable:!0,number:!0,expand_all:!0,init_open:!0},style:{primary_color:"#0066CC",avatar:"/images/headers.png",favicon:"/images/favicon-32x32-next.png",article_img_align:"left",left_side_width:"260px",content_max_width:"920px",hover:{shadow:!0,scale:!0},first_screen:{enable:!0,background_img:"/images/bg.svg",description:"天官赐福 百无禁忌"},scroll:{progress_bar:{enable:!0},percent:{enable:!0}}},local_search:{enable:!0,preload:!0},code_copy:{enable:!0,style:"mac"},pjax:{enable:!1},lazyload:{enable:!0},version:"3.4.2"},KEEP.language_ago={second:"%s 秒前",minute:"%s 分钟前",hour:"%s 小时前",day:"%s 天前",week:"%s 周前",month:"%s 月前",year:"%s 年前"}</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="progress-bar-container"><span class="scroll-progress-bar"></span></div><main class="page-container"><div class="page-main-content"><div class="page-main-content-top"><header class="header-wrapper"><div class="header-content"><div class="left"><a class="logo-title" href="/">小鱼仙倌</a></div><div class="right"><div class="pc"><ul class="menu-list"><li class="menu-item"><a href="/">首页</a></li><li class="menu-item"><a href="/archives">归档</a></li><li class="menu-item"><a href="/tags">标签</a></li><li class="menu-item search search-popup-trigger"><i class="fas fa-search"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div><div class="icon-item menu-bar"><div class="menu-bar-middle"></div></div></div></div></div><div class="header-drawer"><ul class="drawer-menu-list"><li class="drawer-menu-item flex-center"><a href="/">首页</a></li><li class="drawer-menu-item flex-center"><a href="/archives">归档</a></li><li class="drawer-menu-item flex-center"><a href="/tags">标签</a></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle"><div class="main-content"><div class="fade-in-down-animation"><div class="article-content-container"><div class="article-title"><span class="title-hover-animation">跨域</span></div><div class="article-header"><div class="avatar"><img src="/images/headers.png"></div><div class="info"><div class="author"><span class="name">小鱼仙倌</span> <span class="author-label">Lv5</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fas fa-edit"></i>&nbsp;2019-02-13 18:39:12 </span><span class="article-tags article-meta-item"><i class="fas fa-tags"></i>&nbsp;<ul><li><a href="/tags/js/">js</a>&nbsp;</li><li>| <a href="/tags/cors/">cors</a>&nbsp;</li><li>| <a href="/tags/%E8%B7%A8%E5%9F%9F/">跨域</a>&nbsp;</li><li>| <a href="/tags/jsonp/">jsonp</a>&nbsp;</li></ul></span><span class="article-wordcount article-meta-item"><i class="fas fa-file-word"></i>&nbsp;<span>1.3k 字</span> </span><span class="article-min2read article-meta-item"><i class="fas fa-clock"></i>&nbsp;<span>5 分钟</span> </span><span class="article-pv article-meta-item"><i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h2 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h2><p>###<a class="link" target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html">浏览器同源政策及其规避方法<i class="fas fa-external-link-alt"></i></a></p><h3 id="跨域是由于浏览器的同源策略限制，而产生的一种安全模式。"><a href="#跨域是由于浏览器的同源策略限制，而产生的一种安全模式。" class="headerlink" title="跨域是由于浏览器的同源策略限制，而产生的一种安全模式。"></a>跨域是由于浏览器的同源策略限制，而产生的一种安全模式。</h3><h2 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h2><h3 id="同源是指同协议，同域名，同端口，三者相同就是同源，如有一项不同就是跨域，而在浏览器中静态资源不受同源策略的影响（img-link，script-iframe）"><a href="#同源是指同协议，同域名，同端口，三者相同就是同源，如有一项不同就是跨域，而在浏览器中静态资源不受同源策略的影响（img-link，script-iframe）" class="headerlink" title="同源是指同协议，同域名，同端口，三者相同就是同源，如有一项不同就是跨域，而在浏览器中静态资源不受同源策略的影响（img,link，script,iframe）"></a>同源是指同协议，同域名，同端口，三者相同就是同源，如有一项不同就是跨域，而在浏览器中静态资源不受同源策略的影响（img,link，script,iframe）</h3><h2 id="解决跨域"><a href="#解决跨域" class="headerlink" title="解决跨域"></a>解决跨域</h2><h3 id="利用同源策略的特点解决跨域问题"><a href="#利用同源策略的特点解决跨域问题" class="headerlink" title="利用同源策略的特点解决跨域问题"></a>利用同源策略的特点解决跨域问题</h3><h2 id="方式一-jsonp请求"><a href="#方式一-jsonp请求" class="headerlink" title="方式一: jsonp请求"></a>方式一: jsonp请求</h2><h3 id="利用静态资源不受跨域的限制解决跨域"><a href="#利用静态资源不受跨域的限制解决跨域" class="headerlink" title="利用静态资源不受跨域的限制解决跨域"></a>利用静态资源不受跨域的限制解决跨域</h3><blockquote><p>####封装jsonp</p></blockquote><pre><code>const getParams = (data) =&gt; &#123; // 创建一个函数，接收一个参数
  console.log(data, &#39;444&#39;)
  let params = &#39;&#39;
  for (let key in data) &#123;
    console.log(key)
    params += &#39;&amp;&#39; + key + &#39;=&#39; + data[key]
  &#125;
  return params
&#125;
const jsonp = (url, data) =&gt; &#123; // 创建函数接收需要跨域请求的地址
  return new Promise((resolve, reject) =&gt; &#123;
    const script = document.createElement(&#39;script&#39;) // 动态创建script标签
    const callbackName = &#39;a&#39; + (+new Date()) // 随机定义callback函数名
    const params = getParams(data) // 拼接参数
    script.src = url + &#39;?callback=&#39; + callbackName + &#39;&amp;&#39; + params // 设置src属性为接口地址
    console.log(script)
    document.body.appendChild(script) // 动态插入到页面中
    window[callbackName] = function (res) &#123; // 动态设置callback函数到window上
      resolve(res) // 成功后
      document.body.removeChild(script) // 删除script标签
      window[callbackName] = null // 清空window上的callback函数
    &#125;
    console.log(&#39;aaa&#39;)
  &#125;)
&#125;
export default jsonp
</code></pre><blockquote><p>###后端【使用express来说】</p></blockquote><pre><code>router.get(&#39;/list&#39;, function(req,res)&#123;
  console.log(req.query)
  let &#123;callback&#125; = req.query
  res.send(`$&#123;callback&#125;(&#39;sssss&#39;)`)
&#125;)
</code></pre><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><blockquote><p>可以解决跨域，并且兼容所有浏览器</p></blockquote><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><blockquote><p>只能get请求，不能post请求</p></blockquote><h4 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h4><blockquote><p>利用了静态资源不受同源策略影响</p></blockquote><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><blockquote><p>动态生成script标签，并且设置src属性为接口地址，动态插入到页面中，发出请求，后端接到请求，需要获取callback的参数，而callback的参数<br>动态生成script标签的时候，动态生成函数名称</p></blockquote><h2 id="方式二：cors"><a href="#方式二：cors" class="headerlink" title="方式二：cors"></a>方式二：cors</h2><p>cors跨域资源共享，这是浏览器的新增特性，只需要操作服务即可，客户端不变，常用场景就是小程序</p><p>Cors是一个w3c标准，全称是“跨域资源共享”（Corss-origin rsource sharing）</p><p>他允许浏览器向跨域服务器，发出XMLrequrest请求，从而克服了AJAX只能同源使用的限制</p><p>前端不需要做任何修改，只需要服务端设置允许的header头即可</p><pre><code>app.use((req, res, next) =&gt; &#123;
  res.header(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;); // 允许所有跨域请求
  res.header(&#39;Access-Control-Allow-Credentials&#39;, true) // 允许携带cookie
  res.header(&#39;Access-Control-Allow-Headers&#39;, &#39;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&#39;); //允许的header内容
  res.header(&#39;Access-Control-Allow-Methods&#39;, &#39;PUT, POST, GET, DELETE, OPTIONS&#39;); // 允许的请求方法

  next()
&#125;)
</code></pre><h3 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h3><blockquote><h4 id="前端不需要做任何处理，支持get，post任何请求"><a href="#前端不需要做任何处理，支持get，post任何请求" class="headerlink" title="前端不需要做任何处理，支持get，post任何请求"></a>前端不需要做任何处理，支持get，post任何请求</h4></blockquote><h3 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h3><blockquote><h4 id="浏览器兼容，不兼容IE10以下浏览器"><a href="#浏览器兼容，不兼容IE10以下浏览器" class="headerlink" title="浏览器兼容，不兼容IE10以下浏览器"></a>浏览器兼容，不兼容IE10以下浏览器</h4></blockquote><h3 id="特性-1"><a href="#特性-1" class="headerlink" title="特性"></a>特性</h3><blockquote><h4 id="浏览器新特性"><a href="#浏览器新特性" class="headerlink" title="浏览器新特性"></a>浏览器新特性</h4></blockquote><h2 id="方式三：代理"><a href="#方式三：代理" class="headerlink" title="方式三：代理"></a>方式三：代理</h2><p>一般情况下跨域产生的原因域名端口不一样，因为在开发环境中，前端启动的是自己的服务，后端启动也是自己的服务，而在后面上线了就不存在跨域了，这种情况下我们一般使用代理的形式（后端不需要做任何调整，只需要前端添加反向代理即可）</p><p>客户端发出去请求 – 本地服务器拦截 – 发现是api开头 – 本地服务发出请求请求(localhost:3000) – 跨域服务器返回数据 – 本地服务器接收数据 – 将数据返回给客户端</p><h2 id="方式四：window-name-iframe"><a href="#方式四：window-name-iframe" class="headerlink" title="方式四：window.name+iframe"></a>方式四：window.name+iframe</h2><h3 id="window-name通过在iframe（一般动态创建i）中加载跨域HTML文件来起作用。然后，HTML文件将传递给请求者的字符串内容赋值给window-name。然后，请求者可以检索window-name值作为响应。"><a href="#window-name通过在iframe（一般动态创建i）中加载跨域HTML文件来起作用。然后，HTML文件将传递给请求者的字符串内容赋值给window-name。然后，请求者可以检索window-name值作为响应。" class="headerlink" title="window.name通过在iframe（一般动态创建i）中加载跨域HTML文件来起作用。然后，HTML文件将传递给请求者的字符串内容赋值给window.name。然后，请求者可以检索window.name值作为响应。"></a>window.name通过在iframe（一般动态创建i）中加载跨域HTML文件来起作用。然后，HTML文件将传递给请求者的字符串内容赋值给window.name。然后，请求者可以检索window.name值作为响应。</h3><ul><li>iframe标签的跨域能力；</li><li>window.name属性值在文档刷新后依旧存在的能力（且最大允许2M左右）。</li></ul><blockquote><h4 id="每个iframe都有包裹它的window，而这个window是top-window的子窗口。contentWindow属性返回iframe元素的Window对象。你可以使用这个Window对象来访问iframe的文档及其内部DOM。"><a href="#每个iframe都有包裹它的window，而这个window是top-window的子窗口。contentWindow属性返回iframe元素的Window对象。你可以使用这个Window对象来访问iframe的文档及其内部DOM。" class="headerlink" title="每个iframe都有包裹它的window，而这个window是top window的子窗口。contentWindow属性返回iframe元素的Window对象。你可以使用这个Window对象来访问iframe的文档及其内部DOM。"></a>每个iframe都有包裹它的window，而这个window是top window的子窗口。contentWindow属性返回iframe元素的Window对象。你可以使用这个Window对象来访问iframe的文档及其内部DOM。</h4></blockquote><pre><code>&lt;!-- 
 下述用端口 
 10000表示：domainA
 10001表示：domainB
--&gt;

&lt;!-- localhost:10000 --&gt;
&lt;script&gt;
  var iframe = document.createElement(&#39;iframe&#39;);
  iframe.style.display = &#39;none&#39;; // 隐藏

  var state = 0; // 防止页面无限刷新
  iframe.onload = function() &#123;
      if(state === 1) &#123;
          console.log(JSON.parse(iframe.contentWindow.name));
          // 清除创建的iframe
          iframe.contentWindow.document.write(&#39;&#39;);
          iframe.contentWindow.close();
          document.body.removeChild(iframe);
      &#125; else if(state === 0) &#123;
          state = 1;
          // 加载完成，指向当前域，防止错误(proxy.html为空白页面)
          // Blocked a frame with origin &quot;http://localhost:10000&quot; from accessing a cross-origin frame.
          iframe.contentWindow.location = &#39;http://localhost:10000/proxy.html&#39;;
      &#125;
  &#125;;

  iframe.src = &#39;http://localhost:10001&#39;;
  document.body.appendChild(iframe);
&lt;/script&gt;

&lt;!-- localhost:10001 --&gt;
&lt;!DOCTYPE html&gt;
...
&lt;script&gt;
  window.name = JSON.stringify(&#123;a: 1, b: 2&#125;);
&lt;/script&gt;
&lt;/html&gt;
</code></pre><h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><blockquote><ol><li><p>直接嵌入其他域（localhots:10001）下的URL会报错，所以需要加载完成替换为当前域的URL(localhots:10000)，proxy.html为空白页面，只为解决该问题；</p></li><li><p>重新设置src（<a class="link" target="_blank" rel="noopener" href="http://localhost:10000/proxy.html%EF%BC%89%E5%90%8E%E5%AF%BC%E8%87%B4%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%96%AD%E5%88%B7%E6%96%B0%EF%BC%8C%E6%89%80%E4%BB%A5%E9%80%9A%E8%BF%87state%E6%9D%A5%E6%8E%A7%E5%88%B6%EF%BC%9B">http://localhost:10000/proxy.html）后导致页面不断刷新，所以通过state来控制；<i class="fas fa-external-link-alt"></i></a></p></li><li><p>全部获取完结果后，清除该iframe。</p></li></ol></blockquote></div><div class="post-copyright-info"><div class="article-copyright-info-container"><ul><li>本文标题：跨域</li><li>本文作者：小鱼仙倌</li><li>创建时间：2019-02-13 18:39:12</li><li>本文链接：http://fishfairy.cn/2019/02/13/cors/</li><li>版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></div><div class="article-nav"><div class="article-prev"><a class="prev" rel="prev" href="/2019/02/17/mvc/"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item">浅谈Mvc.</span> <span class="post-nav-item">上一篇</span></span></a></div><div class="article-next"><a class="next" rel="next" href="/2019/02/12/web%20server/"><span class="title flex-center"><span class="post-nav-title-item">RESTful API</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div></div></div></div></div><div class="page-main-content-bottom"><footer class="footer"><div class="info-container"><div class="copyright-info info-item">&copy; <span>2018</span>&nbsp;-&nbsp; 2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">小鱼仙倌</a></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv">访问人数&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp; </span><span id="busuanzi_container_site_pv">总访问量&nbsp;<span id="busuanzi_value_site_pv"></span></span></div><div class="icp-info info-item"><a target="_blank" rel="nofollow" href="https://beian.miit.gov.cn">晋ICP备18012867号-2</a></div></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="tools-list"><li class="tools-item page-aside-toggle"><i class="fas fa-outdent"></i></li></ul></div></div><div class="right-bottom-side-tools"><div class="side-tools-container"><ul class="side-tools-list"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-expand-width flex-center"><i class="fas fa-arrows-alt-h"></i></li><li class="tools-item tool-dark-light-toggle flex-center"><i class="fas fa-moon"></i></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="exposed-tools-list"><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li><li class="tools-item tool-scroll-to-top flex-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><aside class="page-aside"><div class="post-toc-wrap"><div class="post-toc"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%A8%E5%9F%9F"><span class="nav-number">1.</span> <span class="nav-text">跨域</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%A8%E5%9F%9F%E6%98%AF%E7%94%B1%E4%BA%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E9%99%90%E5%88%B6%EF%BC%8C%E8%80%8C%E4%BA%A7%E7%94%9F%E7%9A%84%E4%B8%80%E7%A7%8D%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F%E3%80%82"><span class="nav-number">1.1.</span> <span class="nav-text">跨域是由于浏览器的同源策略限制，而产生的一种安全模式。</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5"><span class="nav-number">2.</span> <span class="nav-text">同源策略</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8C%E6%BA%90%E6%98%AF%E6%8C%87%E5%90%8C%E5%8D%8F%E8%AE%AE%EF%BC%8C%E5%90%8C%E5%9F%9F%E5%90%8D%EF%BC%8C%E5%90%8C%E7%AB%AF%E5%8F%A3%EF%BC%8C%E4%B8%89%E8%80%85%E7%9B%B8%E5%90%8C%E5%B0%B1%E6%98%AF%E5%90%8C%E6%BA%90%EF%BC%8C%E5%A6%82%E6%9C%89%E4%B8%80%E9%A1%B9%E4%B8%8D%E5%90%8C%E5%B0%B1%E6%98%AF%E8%B7%A8%E5%9F%9F%EF%BC%8C%E8%80%8C%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%B8%8D%E5%8F%97%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E7%9A%84%E5%BD%B1%E5%93%8D%EF%BC%88img-link%EF%BC%8Cscript-iframe%EF%BC%89"><span class="nav-number">2.1.</span> <span class="nav-text">同源是指同协议，同域名，同端口，三者相同就是同源，如有一项不同就是跨域，而在浏览器中静态资源不受同源策略的影响（img,link，script,iframe）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F"><span class="nav-number">3.</span> <span class="nav-text">解决跨域</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E7%9A%84%E7%89%B9%E7%82%B9%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="nav-number">3.1.</span> <span class="nav-text">利用同源策略的特点解决跨域问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80-jsonp%E8%AF%B7%E6%B1%82"><span class="nav-number">4.</span> <span class="nav-text">方式一: jsonp请求</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%B8%8D%E5%8F%97%E8%B7%A8%E5%9F%9F%E7%9A%84%E9%99%90%E5%88%B6%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F"><span class="nav-number">4.1.</span> <span class="nav-text">利用静态资源不受跨域的限制解决跨域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E7%82%B9"><span class="nav-number">4.1.1.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%BA%E7%82%B9"><span class="nav-number">4.1.2.</span> <span class="nav-text">缺点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%B9%E6%80%A7"><span class="nav-number">4.1.3.</span> <span class="nav-text">特性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">4.1.4.</span> <span class="nav-text">原理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9Acors"><span class="nav-number">5.</span> <span class="nav-text">方式二：cors</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%98%E7%82%B9-1"><span class="nav-number">5.1.</span> <span class="nav-text">优点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E4%B8%8D%E9%9C%80%E8%A6%81%E5%81%9A%E4%BB%BB%E4%BD%95%E5%A4%84%E7%90%86%EF%BC%8C%E6%94%AF%E6%8C%81get%EF%BC%8Cpost%E4%BB%BB%E4%BD%95%E8%AF%B7%E6%B1%82"><span class="nav-number">5.1.1.</span> <span class="nav-text">前端不需要做任何处理，支持get，post任何请求</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%BA%E7%82%B9-1"><span class="nav-number">5.2.</span> <span class="nav-text">缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%EF%BC%8C%E4%B8%8D%E5%85%BC%E5%AE%B9IE10%E4%BB%A5%E4%B8%8B%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="nav-number">5.2.1.</span> <span class="nav-text">浏览器兼容，不兼容IE10以下浏览器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%80%A7-1"><span class="nav-number">5.3.</span> <span class="nav-text">特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%96%B0%E7%89%B9%E6%80%A7"><span class="nav-number">5.3.1.</span> <span class="nav-text">浏览器新特性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%89%EF%BC%9A%E4%BB%A3%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">方式三：代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F%E5%9B%9B%EF%BC%9Awindow-name-iframe"><span class="nav-number">7.</span> <span class="nav-text">方式四：window.name+iframe</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#window-name%E9%80%9A%E8%BF%87%E5%9C%A8iframe%EF%BC%88%E4%B8%80%E8%88%AC%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BAi%EF%BC%89%E4%B8%AD%E5%8A%A0%E8%BD%BD%E8%B7%A8%E5%9F%9FHTML%E6%96%87%E4%BB%B6%E6%9D%A5%E8%B5%B7%E4%BD%9C%E7%94%A8%E3%80%82%E7%84%B6%E5%90%8E%EF%BC%8CHTML%E6%96%87%E4%BB%B6%E5%B0%86%E4%BC%A0%E9%80%92%E7%BB%99%E8%AF%B7%E6%B1%82%E8%80%85%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%86%85%E5%AE%B9%E8%B5%8B%E5%80%BC%E7%BB%99window-name%E3%80%82%E7%84%B6%E5%90%8E%EF%BC%8C%E8%AF%B7%E6%B1%82%E8%80%85%E5%8F%AF%E4%BB%A5%E6%A3%80%E7%B4%A2window-name%E5%80%BC%E4%BD%9C%E4%B8%BA%E5%93%8D%E5%BA%94%E3%80%82"><span class="nav-number">7.1.</span> <span class="nav-text">window.name通过在iframe（一般动态创建i）中加载跨域HTML文件来起作用。然后，HTML文件将传递给请求者的字符串内容赋值给window.name。然后，请求者可以检索window.name值作为响应。</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AF%8F%E4%B8%AAiframe%E9%83%BD%E6%9C%89%E5%8C%85%E8%A3%B9%E5%AE%83%E7%9A%84window%EF%BC%8C%E8%80%8C%E8%BF%99%E4%B8%AAwindow%E6%98%AFtop-window%E7%9A%84%E5%AD%90%E7%AA%97%E5%8F%A3%E3%80%82contentWindow%E5%B1%9E%E6%80%A7%E8%BF%94%E5%9B%9Eiframe%E5%85%83%E7%B4%A0%E7%9A%84Window%E5%AF%B9%E8%B1%A1%E3%80%82%E4%BD%A0%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AAWindow%E5%AF%B9%E8%B1%A1%E6%9D%A5%E8%AE%BF%E9%97%AEiframe%E7%9A%84%E6%96%87%E6%A1%A3%E5%8F%8A%E5%85%B6%E5%86%85%E9%83%A8DOM%E3%80%82"><span class="nav-number">7.1.1.</span> <span class="nav-text">每个iframe都有包裹它的window，而这个window是top window的子窗口。contentWindow属性返回iframe元素的Window对象。你可以使用这个Window对象来访问iframe的文档及其内部DOM。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="nav-number">7.2.</span> <span class="nav-text">注意：</span></a></li></ol></li></ol></div></div></aside><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fas fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fas fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/header-shrink.js"></script><script src="/js/back2top.js"></script><script src="/js/dark-light-toggle.js"></script><script src="/js/local-search.js"></script><script src="/js/code-copy.js"></script><script src="/js/lazyload.js"></script><div class="post-scripts"><script src="/js/left-side-toggle.js"></script><script src="/js/libs/anime.min.js"></script><script src="/js/toc.js"></script></div></body></html>