---
title: 🍉js执行机制🍉
date: "10/09/2019 11:42:35 AM "
tag: ["js"]
meta:
  - name: description
    content: null
  - name: keywords
    content: null
---

# S

js 是一门非阻塞脚本语言，同一时刻只会允许一个代码执行，在单线程的机制中，执行异步任务是，在等待返回结果前，后面代码无法执行

# 事件循环

## 设计单线程原因

如果 js 是多线程的话，因为 DOM 可以通过 js 去操作，如果此时有两个线程操作同一个 DOM，线程一删除了这个 DOM，而线程
二要操作这个 DOM，则会产生矛盾。

## 宏任务和微任务

### 宏任务

- Script
- setTimeout, setInterval
- I/O
- UI 渲染
- ...

### 微任务

- Promise
- ...

## 执行规则

> js 是通过事件循环机制（EventLoop）来解决这一弊端

- 所有代码进入到主线程执行栈，开始执行
- 执行过程中，同步代码会立即执行，宏任务会进入到宏任务队列，微任务进入微任务队列
- 当前宏任务执行完成出队，读取微任务列表有则执行，直至全部执行完毕
